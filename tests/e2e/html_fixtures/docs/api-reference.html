<!DOCTYPE html>
<html lang="en">
<head><title>API Reference - E2E Test Docs</title></head>
<body>
<nav class="sidebar">
  <a href="/docs/">Home</a>
  <a href="/docs/getting-started">Getting Started</a>
  <a href="/docs/authentication">Authentication</a>
  <a href="/docs/api-reference">API Reference</a>
  <a href="/docs/deployment">Deployment Guide</a>
</nav>
<main>
  <h1>API Reference</h1>
  <p>Complete reference for all available API endpoints and data models.</p>

  <h2>Search Endpoint</h2>
  <p>Search across indexed documentation using natural language queries.</p>
  <pre><code class="language-bash">GET /api/v1/search?q=useState&maxResults=10

# Response:
{
  "results": [
    {"title": "Using State", "score": 0.95, "file": "hooks.md"},
    {"title": "State Management", "score": 0.82, "file": "patterns.md"}
  ],
  "total": 2,
  "query_time_ms": 12
}</code></pre>

  <h2>Index Management</h2>
  <p>Rebuild the search index after adding or updating documentation files.</p>
  <pre><code class="language-python">from anydocs import IndexManager

manager = IndexManager(docs_path="./docs")
result = manager.rebuild_index()
print(f"Indexed {result.total_sections} sections from {result.total_files} files")
print(f"Build time: {result.build_time_ms}ms")</code></pre>

  <h2>Data Models</h2>
  <h3>Section</h3>
  <p>Represents a single documentation section parsed from markdown files.</p>
  <pre><code class="language-typescript">interface Section {
  id: string;          // Unique section identifier
  file: string;        // Source file name
  title: string;       // Section heading
  level: number;       // Heading level (1-6)
  path: string[];      // Parent heading hierarchy
  content: string;     // Section text content
  codeBlocks: CodeBlock[];
  sourceUrl?: string;  // Original documentation URL
}

interface CodeBlock {
  language: string;    // Programming language
  code: string;        // Code content
}</code></pre>

  <h3>DocumentIndex</h3>
  <p>The complete search index containing all parsed sections.</p>
  <pre><code class="language-typescript">interface DocumentIndex {
  files: Map&lt;string, Section[]&gt;;
  allSections: Section[];
  tocByFile: Map&lt;string, string&gt;;
}</code></pre>

  <h2>Rate Limiting</h2>
  <p>The API enforces rate limits to ensure fair usage:</p>
  <ul>
    <li><strong>Search:</strong> 100 requests per minute</li>
    <li><strong>Index rebuild:</strong> 5 requests per hour</li>
    <li><strong>File operations:</strong> 50 requests per minute</li>
  </ul>
  <p>Rate limit headers are included in every response:</p>
  <pre><code class="language-bash">X-RateLimit-Limit: 100
X-RateLimit-Remaining: 97
X-RateLimit-Reset: 1706900400</code></pre>
</main>
</body>
</html>
