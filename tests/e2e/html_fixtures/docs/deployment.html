<!DOCTYPE html>
<html lang="en">
<head><title>Deployment Guide - E2E Test Docs</title></head>
<body>
<nav class="sidebar">
  <a href="/docs/">Home</a>
  <a href="/docs/getting-started">Getting Started</a>
  <a href="/docs/authentication">Authentication</a>
  <a href="/docs/api-reference">API Reference</a>
  <a href="/docs/deployment">Deployment Guide</a>
</nav>
<main>
  <h1>Deployment Guide</h1>
  <p>Deploy AnyDocsMCP to production using Docker or traditional server setups.</p>

  <h2>Docker Deployment</h2>
  <p>The recommended way to deploy is using Docker Compose:</p>
  <pre><code class="language-yaml">version: '3.8'
services:
  anydocs:
    image: anydocs-mcp:latest
    ports:
      - "3000:3000"
    volumes:
      - ./docs:/app/docs
    environment:
      - NODE_ENV=production
      - API_KEY=${API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3</code></pre>

  <h2>Environment Variables</h2>
  <p>Configure the server using these environment variables:</p>
  <ul>
    <li><strong>NODE_ENV</strong> - Set to 'production' for optimized performance</li>
    <li><strong>API_KEY</strong> - Secret key for API authentication</li>
    <li><strong>DOCS_PATH</strong> - Path to documentation directory (default: ./docs)</li>
    <li><strong>PORT</strong> - Server port (default: 3000)</li>
    <li><strong>LOG_LEVEL</strong> - Logging verbosity: debug, info, warn, error</li>
  </ul>

  <h2>Production Checklist</h2>
  <p>Before going to production, verify the following:</p>
  <pre><code class="language-bash"># 1. Build the production image
docker build -t anydocs-mcp:latest .

# 2. Run security scan
docker scan anydocs-mcp:latest

# 3. Test the health endpoint
docker run -d -p 3000:3000 anydocs-mcp:latest
curl http://localhost:3000/health

# 4. Verify search functionality
curl "http://localhost:3000/api/v1/search?q=test"</code></pre>

  <h2>Monitoring</h2>
  <p>The server exposes Prometheus-compatible metrics at <code>/metrics</code>:</p>
  <pre><code class="language-python">from prometheus_client import Counter, Histogram

search_requests = Counter('search_total', 'Total search requests')
search_latency = Histogram('search_latency_seconds', 'Search latency')
index_size = Gauge('index_sections_total', 'Total indexed sections')</code></pre>
  <p>Set up alerts for search latency exceeding 200ms and error rates above 1%.</p>
</main>
</body>
</html>
